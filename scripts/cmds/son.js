module.exports.config = {
    name: "son",
    category: "automation",
    author: "Romim"
}

const userResponses = {};
module.exports.onStart = async function({ api, event }) {
    const mention = Object.keys(event.mentions)[0]; 
    if (!mention) return api.sendMessage("mention please", event.threadID);

    api.getUserInfo(mention, async (err, userInfo) => {
        if (err) {
            return api.sendMessage("Failed to retrieve user information.", event.threadID);
        }

        let genderText;
        switch (userInfo[mention].gender) {
            case 1:
                genderText = "à¦®à¦¾à¦‡à¦¯à¦¼à¦¾";
                break;
            case 2:
                genderText = "à¦ªà§‹à¦²à¦¾";
                break;
            default:
                genderText = "à¦¹à¦¿à¦œà¦¡à¦¼à¦¾";
        }

        const msg = [`à¦–à¦¾à¦‚à¦•à¦¿à¦° ${genderText} à¦¤à¦° à¦®à¦¾à¦°à§‡ à¦šà§à¦‡à¦¦à¦¾ à¦¤à§‹à¦° à¦®à¦¾à¦° à¦¬à§‹à¦¦à¦¾ à¦¤à§‡ à¦†à¦®à¦¾à¦° à¦®à¦¾à¦² à¦«à¦¾à¦²à¦¾à¦¬à§‹ à¦¤à§‹à¦° à¦¬à¦¾à¦ª à¦†à¦®à¦¿`, `à¦“à¦“à¦“ à¦¬à¦¾à¦¨à§à¦¦à¦¿ à¦° ${genderText} à¦®à¦¾à¦—à¦¿à¦° à¦›à¦¾à¦“à¦¯à¦¼à¦¾à¦²  à¦¤à§‹à¦° à¦¬à¦¾à¦ª à¦†à¦®à¦¿  ðŸ˜.     
    .`, `à¦®à¦¾à¦¦à¦¾à¦°à¦šà§‹à¦¦ à¦¤à¦° à¦†à¦®à§à¦®à§ à¦ªà¦® à¦ªà¦® à¦–à¦¾à¦¯à¦¼ à¦¤à§‹à¦° à¦¬à¦¾à¦ª à¦†à¦®à¦¿`,
`à¦à¦–à¦¨ à¦›à¦¨à§à¦¦à§‡à¦° à¦¤à¦¾à¦²à§‡ à¦¤à¦¾à¦²à§‡ à¦¤à§‹à¦° à¦®à¦¾à¦°à§‡ à¦šà§à¦¦à¦¬à§‹ à¦†à¦¾à¦œà¦•à§‡ à¦–à¦¾à¦²à§‡ à¦¬à¦¿à¦²à§‡ à¦†à¦®à¦¿ à¦¤à§‹à¦° à¦¬à¦¾à¦ª ðŸ’” `,
`à§©-à§©-à§¬ à¦¤à§‹à¦° à¦®à¦¾à¦°à§‡ à¦¤à¦šà§à¦¦à¦¾à¦®à¦¿ à¦•à¦°à¦®à§ à¦¤à§‹à¦° à¦®à¦¾à¦° à¦­**** à¦œà¦¯à¦¼..`,
`à¦¤à§‹à¦° à¦®à¦¾à¦°à§‡ à¦¦à¦¿à¦¬à¦¾à¦¨à¦¿à¦¶à¦¿ à¦°à¦¾à¦‡à¦¤à§‡ à¦šà¦¾à¦à¦¦ à¦¦à§‡à¦–à¦¾à¦¨à§‹à¦° à¦•à¦¥à¦¾ à¦¬à¦²à§‡ à¦¤à§‹à¦° à¦®à¦¾à¦°à§‡ à¦•à§à¦·à§‡à¦¤à§‡ à¦«à§‡à¦²à§‡ à¦•à§à¦¤à§à¦¤à¦¾ à¦¦à¦¿à¦¯à¦¼à§‡ à¦šà§à¦¦à¦¾à¦¬à§‹ðŸŒ¸ðŸ¥°
    `,
`à¦¬à¦¾à¦¡à¦¼à¦¿à¦° à¦ªà¦¾à¦¶à§‡ à¦¬à¦°à¦¿à¦¶à¦¾à¦² à¦®à§à¦°à¦—à¦¿ à¦¤à§‹à¦° à¦®à¦¾à§Ÿà§‡ à¦°à§‡ à¦šà§à¦‡à¦¦à§à¦¦à¦¾ à¦¤à§‹à¦° à¦®à¦¾à¦° à¦­à§‹à¦¦à¦¾ à¦¤à§‡ à¦¦à¦¿à¦®à§ 1 à¦¬à¦¾à¦²à¦¤à¦¿ à¦®à¦¾à¦²`,

`à¦–à¦¾à¦™à§à¦•à¦¿à¦°à¦ªà§‹à¦²à¦¾ à¦ªà§‹à¦²à¦¾ à¦¤à¦° à¦¬à§‹à¦¨à§‡à¦°  à¦¹à§‹à¦—à¦¾à§Ÿ à¦‡à¦¨à¦ªà§à¦Ÿ, à¦¤à¦° à¦®à¦¾à§Ÿà§‡à¦° à¦­à§‹à¦¦à¦¾à§Ÿ à¦†à¦‰à¦Ÿà¦ªà§à¦Ÿà¥¤`,
`à¦•à¦¿à¦°à§‡ à¦šà§œà¦¾à¦‡à¦¨à§à¦¨à¦¾ à¦¬à¦¦à¦¾à¦‡à¦¨à§à¦¨à¦¾ à¦®à¦¾à¦—à§€à¦° ${genderText} à¦—à¦¾à¦§à¦¾à¦° à¦†à¦›à§‡ à¦¨à¦¾à¦•à¦¿
 à¦šà¦¾à¦®à¦¡à¦¼à¦¾ à¦¤à§‹à¦° à¦®à¦¾à¦° à¦­à§‹à¦¦à¦¾ à¦¤à§à¦‡ à¦•à¦¾à¦®à¦¡à¦¼à¦¾`,
`à¦šà§‹à¦¦à¦¾ à¦–à¦¾à¦‡à¦¯à¦¼à¦¾ à¦¤à§‹à¦° à¦®à¦¾ à¦¯à¦¾à¦‡à¦¬à§‹  à¦®à¦‡à¦°à¦¾,à¦¤à§‹à¦° à¦•à¦šà¦¿ à¦¬à¦‡à¦¨ à¦Ÿà¦¾ à¦°à§‡ à¦šà§à¦¦à§à¦® à¦†à¦®à¦¿ à¦¤à§‹à¦° à¦¬à¦‡à¦¨à§‡à¦° à¦¦à§à¦¦ 2 à¦Ÿà¦¾ à¦§à¦‡à¦°à¦¾`,
`à¦šà§à¦¦à¦¾ à¦–à¦¾à¦‡à¦¯à¦¼à¦¾ à¦¤à§‹à¦° à¦®à¦¾ à¦¬à¦²à¦¬ à¦¬à¦¾à¦¬à¦¾ à¦šà¦¾à¦° à¦†à¦®à¦¿ à¦¬à¦²à¦¬ à¦¤à§à¦‡ à¦†à¦—à§‡ à¦•à§‹ à¦¤à§‹à¦° à¦­à§‹à¦¦à¦¾à¦Ÿà¦¾ à¦•à¦¾à¦°? `,
`à¦•à¦¾à¦šà§à¦šà¦¿ à¦–à¦¾à¦‡à¦¤à§‡ à¦²à¦¾à¦—à§‡ à¦¨à¦¾à¦•à¦¿ à¦®à¦œà¦¾ à¦¤à§‹à¦° à¦®à¦¾à¦¯à¦¼ à¦°à§‡ à¦šà§à¦‡à¦¦à§à¦¦à¦¾ à¦–à¦¾à¦®à§ à¦†à¦®à¦¿ 1 à¦•à§à¦²à¦•à¦¿ à¦—à¦¾à¦œà¦¾ à¦—à¦¾à¦à¦œà¦¾ à¦–à§‡à¦¯à¦¼à§‡ à¦¤à§‹à¦° à¦®à¦¾à¦¯à¦¼à§‡à¦°à§‡ à¦šà§à¦‡à¦¦à¦¾ à¦¤à§‹à¦° à¦®à¦¾à¦°à§‡ gift à¦¦à¦¿à¦®à§ à¦–à¦¾à¦œà¦¾ðŸ˜˜`,
`à¦®à¦¾à¦²à§‡à¦° à¦°à¦‚ à¦¨à¦¾à¦•à¦¿ à¦¸à¦¾à¦¦à¦¾,,à¦®à§à¦°à¦—à¦¿ à¦®à¦¾à¦—à§€à¦° ${genderText} à¦¤à§‹à¦° à¦®à¦¾ à¦°à§‡ à¦šà§à¦‡à¦¦à§à¦¦à¦¾ à¦¬à¦¾à¦¨à¦¾à¦®à§ à¦†à¦®à¦¿ à¦…à¦¨ à¦²à¦¾à¦‡à¦¨ à¦ à¦—à¦¾à¦à¦§à¦¾`,
`à¦¤à§‹à¦° à¦®à¦¾à¦¯à¦¼ à¦°à§‡ à¦šà§‹à¦¦à¦¤à§‡ à¦šà§‹à¦¦à¦¤à§‡ à¦¤à§‹à¦° à¦®à¦¾à¦¯à¦¼ à¦¦à¦¿à¦¸à§‡ à¦•à¦¾à¦‡à¦¨à§à¦¦à¦¾,,à¦®à§à¦°à¦—à¦¿ à¦®à¦¾à¦—à§€à¦° à¦ªà§‹à¦²à¦¾ à¦¤à§‹à¦° à¦•à¦šà¦¿ à¦¬à¦‡à¦¨ à¦Ÿà¦¾ à¦°à§‡ à¦“ à¦šà§à¦¦à§à¦® à¦¤à§‹à¦° à¦¹à¦¾à¦¤ à¦ªà¦¾ à¦¬à¦¾à¦‡à¦¨à§à¦¦à¦¾`,
`à¦šà§à¦¦à¦¿`];

        let index = 0;
        api.sendMessage(`kire ${event.mentions[mention]} - son valo achis?`, event.threadID);

        if (!userResponses[mention]) {
            userResponses[mention] = { index: 0 };
        }

        api.listenMqtt((err, message) => {
            if (message.senderID === mention && message.body) {
                const currentIndex = userResponses[mention].index;
                api.sendMessage(msg[currentIndex % msg.length], message.threadID, message.messageID);
                userResponses[mention].index++;
            }
        });
    });
      }
